(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3626bc70"],{"07d0":function(t,e,s){},"14c3":function(t,e,s){var n=s("c6b6"),a=s("9263");t.exports=function(t,e){var s=t.exec;if("function"===typeof s){var i=s.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"39aa":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"list"},t._l(t.playList,(function(e,n){return s("li",{key:n,staticClass:"item",on:{click:function(s){return t.selectItem(e,n)}}},[s("div",{staticClass:"wrapper",class:t.currentIndex===n?"click-animate":"",on:{click:function(e){return t.setAnimate(n)}}},[t.showCover?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.setUrl(e.al.picUrl,40,40),expression:"setUrl(item.al.picUrl, 40, 40)"}],staticClass:"cover-img",attrs:{alt:""}}):t._e(),s("div",{staticClass:"index",class:t.isTop3(n)},[t._v(" "+t._s(t.indexFormat(n))+" ")]),s("div",{staticClass:"msg",class:t.setMsgClass(n)},[s("p",{staticClass:"song-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"sub-msg",class:t.setMsgClass(n)},[e.copyright?s("span",{staticClass:"copyright"},[t._v("VIP")]):t._e(),t._l(e.ar,(function(n,a){return s("span",{key:a},[t._v(t._s(n.name)),e.ar.length>a+1?s("span",[t._v("/")]):t._e()])})),s("span",[t._v(" - "+t._s(e.al.name))])],2)]),t.setIconClass(n)?s("span",{staticClass:"playing-icon",class:t.setIconClass(n)}):t._e()])])})),0)},a=[],i=(s("a9e3"),s("fa7d")),r={name:"MusicList",data:function(){return{currentIndex:-1}},props:{playList:Array,specialIndex:{type:Boolean,default:!0},showCover:{type:Boolean,default:!0},currentPlaying:Number},computed:{indexFormat:function(){return function(t){return Object(i["a"])(t)}}},methods:{setAnimate:function(t){var e=this;s&&clearTimeout(s),this.currentIndex=t;var s=setTimeout((function(){e.currentIndex=-1}),300)},isTop3:function(t){if(this.specialIndex)return t<=2?"top3":""},selectItem:function(t,e){this.$emit("select",t,e)},setIconClass:function(t){return this.currentPlaying===t?"icon-audiotrack":""},setMsgClass:function(t){return this.currentPlaying===t?"playing":""}}},o=r,c=(s("acdd"),s("2877")),l=Object(c["a"])(o,n,a,!1,null,"48bc0f72",null);e["a"]=l.exports},"3b67":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mini-tab-bar",style:t.flexStyle},[t._l(t.tags,(function(e,n){return s("div",{key:n,ref:"tabItems",refInFor:!0,staticClass:"tab-item",class:{current:t.currentTag===n},on:{click:function(e){return t.changeTag(n)}}},[t._v(" "+t._s(e)+" ")])})),s("div",{ref:"border",staticClass:"border",style:t.borderStyle})],2)},a=[],i=s("26a1"),r=Object(i["a"])("transform"),o={name:"MiniTabBar",data:function(){return{currentTag:0,borderWidth:0}},methods:{changeTag:function(t){this.currentTag=t,this.$refs.border.style[r]="translateX(".concat(this.$refs.tabItems[t].offsetLeft,"px)"),this.borderWidth=this.$refs.tabItems[t].offsetWidth,this.$emit("tagClicked",this.currentTag)}},computed:{flexStyle:function(){return"justify-content: ".concat(this.layout)},borderStyle:function(){return"width:".concat(this.borderWidth,"px")}},mounted:function(){this.borderWidth=this.$refs.tabItems[0].offsetWidth},props:{tags:{type:Array,default:function(){return[]}},layout:{type:String,default:"flex-start"}}},c=o,l=(s("5bd8"),s("2877")),u=Object(l["a"])(c,n,a,!1,null,"6fbfc5c6",null);e["a"]=u.exports},5319:function(t,e,s){"use strict";var n=s("d784"),a=s("825a"),i=s("7b0b"),r=s("50c4"),o=s("a691"),c=s("1d80"),l=s("8aa5"),u=s("14c3"),d=Math.max,h=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,s,n){var v=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=n.REPLACE_KEEPS_$0,b=v?"$":"$0";return[function(s,n){var a=c(this),i=void 0==s?void 0:s[t];return void 0!==i?i.call(s,a,n):e.call(String(a),s,n)},function(t,n){if(!v&&y||"string"===typeof n&&-1===n.indexOf(b)){var i=s(e,t,this,n);if(i.done)return i.value}var c=a(t),f=String(this),p="function"===typeof n;p||(n=String(n));var g=c.global;if(g){var x=c.unicode;c.lastIndex=0}var S=[];while(1){var C=u(c,f);if(null===C)break;if(S.push(C),!g)break;var E=String(C[0]);""===E&&(c.lastIndex=l(f,r(c.lastIndex),x))}for(var k="",_=0,T=0;T<S.length;T++){C=S[T];for(var I=String(C[0]),$=d(h(o(C.index),f.length),0),O=[],R=1;R<C.length;R++)O.push(m(C[R]));var j=C.groups;if(p){var U=[I].concat(O,$,f);void 0!==j&&U.push(j);var F=String(n.apply(void 0,U))}else F=w(I,f,$,O,j,n);$>=_&&(k+=f.slice(_,$)+F,_=$+I.length)}return k+f.slice(_)}];function w(t,s,n,a,r,o){var c=n+t.length,l=a.length,u=g;return void 0!==r&&(r=i(r),u=p),e.call(o,u,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return s.slice(0,n);case"'":return s.slice(c);case"<":o=r[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var d=f(u/10);return 0===d?e:d<=l?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}o=a[u-1]}return void 0===o?"":o}))}}))},"53c2":function(t,e,s){"use strict";s("bebb")},"5bd8":function(t,e,s){"use strict";s("e826")},6260:function(t,e,s){"use strict";s("c443")},6547:function(t,e,s){var n=s("a691"),a=s("1d80"),i=function(t){return function(e,s){var i,r,o=String(a(e)),c=n(s),l=o.length;return c<0||c>=l?t?"":void 0:(i=o.charCodeAt(c),i<55296||i>56319||c+1===l||(r=o.charCodeAt(c+1))<56320||r>57343?t?o.charAt(c):i:t?o.slice(c,c+2):r-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},7677:function(t,e,s){"use strict";s("ad1f")},"8aa5":function(t,e,s){"use strict";var n=s("6547").charAt;t.exports=function(t,e,s){return e+(s?n(t,e).length:1)}},"8cc6":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-result container"},[s("div",{staticClass:"search-head"},[s("span",{staticClass:"icon icon-angle-left",on:{click:t.back}}),s("search",{ref:"searchBox",staticClass:"search-box",on:{finished:t.reSearch,switchView:t.switchView}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"result"},[s("div",{staticClass:"tab"},[s("mini-tab-bar",{attrs:{tags:t.tags,layout:"space-between"},on:{tagClicked:t.changeTag}})],1),s("transition",[s("keep-alive",[s(t.currentTabComponent,{ref:"searchResult",tag:"component",attrs:{keywords:t.keywords}})],1)],1)],1)])},a=[],i=(s("ac1f"),s("5319"),s("5530")),r=s("3b67"),o=s("e832"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-songs"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.total,expression:"!total"}],staticClass:"noResult"},[t._v("无结果")]),s("my-scroll",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],ref:"myScroll",attrs:{"pull-up":t.pullUpLoad,"remember-scroll":!0},on:{pullUp:t.getMoreData},scopedSlots:t._u([{key:"scrollContent",fn:function(){return[s("music-list",{staticClass:"scroll-content",attrs:{"play-list":t.list,"special-index":!1,"current-playing":t.currentPlaying},on:{select:t.selectItem}}),s("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"the-loader"}),t.more?t._e():s("p",{staticClass:"bottom"},[t._v("到底啦 ！")])]},proxy:!0}])})],1)},l=[],u=(s("c740"),s("4160"),s("159b"),s("dcab")),d=s("39aa"),h=s("2934"),f=s("5880"),p=s("ac0d"),g={mixins:[p["a"]],name:"Songs",data:function(){return{list:[],more:!0,pullUpLoad:!0,loading:!0,total:1}},props:{keywords:String},components:{MyScroll:u["a"],MusicList:d["a"]},created:function(){this.OFFSET=20,this.getSearchResult(this.keywords)},methods:Object(i["a"])(Object(i["a"])({},Object(f["mapActions"])(["selectPlay"])),{},{getSearchResult:function(t){var e=this;this.loading=!0,Object(h["j"])({limit:20,keywords:t}).then((function(t){e.list=t.result.songs,e.loading=!1,e.total=t.result.songCount}))},getMoreData:function(){var t=this;!this.loading&&this.more&&(this.loading=!0,Object(h["j"])({limit:20,offset:this.OFFSET,keywords:this.keywords}).then((function(e){e.result.songCount>0?(e.result.songs.forEach((function(e){t.list.push(e)})),t.OFFSET+=20):(t.more=!1,t.pullUpLoad=t.more),t.loading=!1})))},selectItem:function(t,e){this.selectPlay({list:this.list,index:e})}}),computed:Object(i["a"])(Object(i["a"])({},Object(f["mapGetters"])(["playlist","currentIndex"])),{},{currentPlaying:function(){var t=this;return this.playlist.length>0?this.list.findIndex((function(e){return e.id===t.playlist[t.currentIndex].id})):-1}}),watch:{keywords:function(t){this.getSearchResult(t)}},beforeUpdate:function(){this.$refs.myScroll.scrollTo(0)}},m=g,v=(s("53c2"),s("2877")),y=Object(v["a"])(m,c,l,!1,null,"0e33ace4",null),b=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-singers"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.total,expression:"!total"}],staticClass:"noResult"},[t._v("无结果")]),s("my-scroll",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],ref:"myScroll",attrs:{"pull-up":t.pullUpLoad,"remember-scroll":!0},on:{pullUp:t.getMoreData},scopedSlots:t._u([{key:"scrollContent",fn:function(){return[s("ul",{staticClass:"scroll-content"},t._l(t.list,(function(e,n){return s("li",{key:n,staticClass:"artist",on:{click:function(s){return t.toSingerDetail(e.id)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.setUrl(e.img1v1Url,40,40),expression:"setUrl(item.img1v1Url, 40, 40)"}],staticClass:"avatar",attrs:{alt:""}}),s("div",{staticClass:"singer-name"},[t._v(t._s(e.name))])])})),0),s("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"the-loader"}),t.more?t._e():s("p",{staticClass:"bottom"},[t._v("到底啦 ！")])]},proxy:!0}])})],1)},x=[],S={mixins:[p["a"]],name:"Songs",data:function(){return{list:[],more:!0,pullUpLoad:!0,loading:!0,total:1}},props:{keywords:String},components:{MyScroll:u["a"]},created:function(){this.OFFSET=20,this.getSearchResult(this.keywords)},methods:{getSearchResult:function(t){var e=this;this.loading=!0,Object(h["j"])({type:100,limit:20,keywords:t}).then((function(t){e.list=t.result.artists,e.loading=!1,e.total=t.result.artistCount}))},getMoreData:function(){var t=this;!this.loading&&this.more&&(this.loading=!0,Object(h["j"])({type:100,limit:20,offset:this.OFFSET,keywords:this.keywords}).then((function(e){e.result.artistCount>0?(e.result.artists.forEach((function(e){t.list.push(e)})),t.OFFSET+=20):(t.more=!1,t.pullUpLoad=t.more),t.loading=!1})))},toSingerDetail:function(t){this.$router.push("/singer/detail/".concat(t)).catch((function(t){return t}))}},watch:{keywords:function(t){this.getSearchResult(t)}},beforeUpdate:function(){this.$refs.myScroll.scrollTo(0)}},C=S,E=(s("c459"),Object(v["a"])(C,w,x,!1,null,"36a69deb",null)),k=E.exports,_={name:"SearchResult",data:function(){return{tags:["单曲","歌手"],show:!0,componentsName:["Songs","Singers"],currentTag:0,keywords:""}},created:function(){this.keywords=this.$route.params.keywords},mounted:function(){var t=this;this.SET_CACHE_VIEWS("SearchResult"),this.$refs.searchBox.setKeywords(this.keywords),e&&clearTimeout(e);var e=setTimeout((function(){t.show=!0}),20)},components:{Search:o["a"],MiniTabBar:r["a"],Songs:b,Singers:k},methods:Object(i["a"])(Object(i["a"])({},Object(f["mapMutations"])(["SET_CACHE_VIEWS","REMOVE_CACHE_VIEWS"])),{},{changeTag:function(t){this.currentTag=t},back:function(){this.$router.push("/discover")},reSearch:function(t){this.$router.replace({path:"/search/".concat(t)}).catch((function(t){return t})),this.$refs.searchBox.blurInput()},switchView:function(t){this.show=t}}),computed:{currentTabComponent:function(){return this.componentsName[this.currentTag]}},beforeRouteUpdate:function(t,e,s){this.$refs.searchBox.setKeywords(t.params.keywords),this.keywords=t.params.keywords,s()},beforeRouteLeave:function(t,e,s){t.meta.index>e.meta.index?this.SET_CACHE_VIEWS("SearchResult"):this.REMOVE_CACHE_VIEWS("SearchResult"),s()}},T=_,I=(s("7677"),Object(v["a"])(T,n,a,!1,null,"b3c3b816",null));e["default"]=I.exports},9263:function(t,e,s){"use strict";var n=s("ad6d"),a=s("9f7f"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(o=function(t){var e,s,a,o,d=this,h=l&&d.sticky,f=n.call(d),p=d.source,g=0,m=t;return h&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),s=new RegExp("^(?:"+p+")",f)),u&&(s=new RegExp("^"+p+"$(?!\\s)",f)),c&&(e=d.lastIndex),a=i.call(h?s:d,m),h?a?(a.input=a.input.slice(g),a[0]=a[0].slice(g),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:c&&a&&(d.lastIndex=d.global?a.index+a[0].length:e),u&&a&&a.length>1&&r.call(a[0],s,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),t.exports=o},"9f7f":function(t,e,s){"use strict";var n=s("d039");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac0d:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"d",(function(){return c})),s.d(e,"c",(function(){return l})),s.d(e,"a",(function(){return u}));s("4160"),s("a9e3"),s("159b");var n=s("5530"),a=s("2934"),i=s("5880"),r=36,o={data:function(){return{playlistsData:[],loading:!1,more:!0,total:0,pullUpLoad:!0}},props:{cat:String,default:"全部"},created:function(){this.OFFSET=36,this.getPlaylistsData()},methods:{getPlaylistsData:function(){var t=this;Object(a["b"])({limit:r,cat:this.cat,offset:0}).then((function(e){t.playlistsData=e.playlists,t.total=e.total}))},getMoreData:function(){var t=this;!this.loading&&this.more&&(this.loading=!0,Object(a["b"])({limit:r,cat:this.cat,offset:this.OFFSET}).then((function(e){e.playlists.forEach((function(e){t.playlistsData.push(e)})),t.OFFSET+=r,t.loading=!1,t.more=t.playlistsData.length<t.total,t.pullUpLoad=t.more})))}}},c={data:function(){return{singers:[],time:0,loading:!0}},props:{cat:{type:Number,default:1}},created:function(){this.getTopSingers()},methods:{getTopSingers:function(){var t=this;Object(a["o"])({type:this.cat}).then((function(e){t.singers=e.list.artists,t.time=e.list.updateTime,t.loading=!1}))}},computed:{updateTime:function(){var t=new Date(this.time);return t.getMonth()+1+"月"+t.getDate()+"日"}}},l={methods:{toPlaylistsDetail:function(t){this.$router.push({path:"/playlists/detail/".concat(t),query:{type:"music-lists"}}).catch((function(t){return t}))},toRankDetail:function(t){this.$router.push({path:"/playlists/detail/".concat(t),query:{type:"rank"}}).catch((function(t){return t}))}},deactivated:function(){this.bus.$off(["coverClicked","rankClicked"])}},u={computed:Object(n["a"])({},Object(i["mapGetters"])(["playlist"])),mounted:function(){this.playlist.length>0&&(this.$refs.myScroll.$el.style.padding="0 0 0.5rem 0")}}},ac1f:function(t,e,s){"use strict";var n=s("23e7"),a=s("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},acdd:function(t,e,s){"use strict";s("07d0")},ad1f:function(t,e,s){},bebb:function(t,e,s){},c443:function(t,e,s){},c459:function(t,e,s){"use strict";s("c5f3")},c5f3:function(t,e,s){},d784:function(t,e,s){"use strict";s("ac1f");var n=s("6eeb"),a=s("d039"),i=s("b622"),r=s("9263"),o=s("9112"),c=i("species"),l=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),h=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var s="ab".split(t);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));t.exports=function(t,e,s,d){var p=i(t),g=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=g&&!a((function(){var e=!1,s=/a/;return"split"===t&&(s={},s.constructor={},s.constructor[c]=function(){return s},s.flags="",s[p]=/./[p]),s.exec=function(){return e=!0,null},s[p](""),!e}));if(!g||!m||"replace"===t&&(!l||!u||h)||"split"===t&&!f){var v=/./[p],y=s(p,""[t],(function(t,e,s,n,a){return e.exec===r?g&&!a?{done:!0,value:v.call(e,s,n)}:{done:!0,value:t.call(s,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),b=y[0],w=y[1];n(String.prototype,t,b),n(RegExp.prototype,p,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}d&&o(RegExp.prototype[p],"sham",!0)}},e826:function(t,e,s){},e832:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-head"},[s("form",{staticClass:"search-form",attrs:{action:"javascript:void 0"},on:{submit:t.finished}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywords,expression:"keywords",modifiers:{trim:!0}}],ref:"input",staticClass:"searchBox",attrs:{type:"search",placeholder:"音乐/歌手"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value.trim())},t.getSuggestion],blur:[t.blur,function(e){return t.$forceUpdate()}],focus:t.focus}})]),t._t("default"),s("span",{staticClass:"icon-search icon-in-input"})],2),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showFlag,expression:"this.showFlag"}],staticClass:"suggest"},[s("ul",t._l(t.suggestion,(function(e,n){return s("li",{key:n,staticClass:"keyword-box",on:{click:function(s){return t.fastSearch(e.keyword)}}},[s("span",{staticClass:"icon-search icon-in-list"}),s("span",{staticClass:"keyword"},[t._v(t._s(e.keyword))])])})),0)])])},a=[],i=s("2934"),r={name:"Search",data:function(){return{keywords:"",suggestion:[],showFlag:!1}},props:{value:String},methods:{getSuggestion:function(){var t=this;this.keywords?Object(i["k"])({type:"mobile",keywords:this.keywords}).then((function(e){t.suggestion=e.result.allMatch})):this.suggestion=[]},finished:function(){this.$emit("finished",this.keywords)},blur:function(){var t=this;e&&clearTimeout(e);var e=setTimeout((function(){t.showFlag=!1,t.$emit("switchView",!0)}),20)},focus:function(){this.showFlag=!!this.keywords,this.$emit("switchView",!this.keywords),this.getSuggestion()},blurInput:function(){this.$refs.input.blur()},setKeywords:function(t){this.keywords=t},fastSearch:function(t){this.$emit("finished",t)}},watch:{keywords:function(){this.showFlag=!!this.keywords,this.$emit("switchView",!this.keywords)}}},o=r,c=(s("6260"),s("2877")),l=Object(c["a"])(o,n,a,!1,null,"7fb4f504",null);e["a"]=l.exports}}]);
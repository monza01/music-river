(function(t){function e(e){for(var r,i,a=e[0],o=e[1],u=e[2],l=0,d=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);f&&f(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,i=1;i<n.length;i++){var a=n[i];0!==s[a]&&(r=!1)}r&&(c.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},s={app:0},c=[];function a(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-010302fe":"bc24ba1b","chunk-0ded4236":"64f5f24d","chunk-1224c105":"e66f5349","chunk-28b40024":"215d154c","chunk-303996f6":"89112033","chunk-3209dd3b":"bbe5c756","chunk-3626bc70":"5a991692","chunk-5fb1204b":"984bec9f","chunk-68c400ac":"f4a8d50f","chunk-77b46fca":"e76e7735","chunk-9a733b50":"c73ca317"}[t]+".js"}function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n={"chunk-010302fe":1,"chunk-0ded4236":1,"chunk-1224c105":1,"chunk-28b40024":1,"chunk-303996f6":1,"chunk-3209dd3b":1,"chunk-3626bc70":1,"chunk-5fb1204b":1,"chunk-68c400ac":1,"chunk-77b46fca":1,"chunk-9a733b50":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-010302fe":"deddc8e2","chunk-0ded4236":"95d37b8e","chunk-1224c105":"81339272","chunk-28b40024":"68c78b41","chunk-303996f6":"199f312e","chunk-3209dd3b":"15942635","chunk-3626bc70":"fd964f32","chunk-5fb1204b":"547765a9","chunk-68c400ac":"dac06e2c","chunk-77b46fca":"0bfe3375","chunk-9a733b50":"13712fed"}[t]+".css",s=o.p+r,c=document.getElementsByTagName("link"),a=0;a<c.length;a++){var u=c[a],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===s))return e()}var d=document.getElementsByTagName("style");for(a=0;a<d.length;a++){u=d[a],l=u.getAttribute("data-href");if(l===r||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||s,c=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete i[t],f.parentNode.removeChild(f),n(c)},f.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){i[t]=0})));var r=s[t];if(0!==r)if(r)e.push(r[2]);else{var c=new Promise((function(e,n){r=s[t]=[e,n]}));e.push(r[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=a(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=s[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}s[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01ea":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={sequence:0,loop:1,random:2}},"028e":function(t,e,n){"use strict";n("c92e")},"26a1":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=document.createElement("div").style,i=function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==r[t[e]])return e;return!1}();function s(t){return!1!==i&&("standard"===i?t:i+t.charAt(0).toUpperCase()+t.substr(1))}},2934:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"i",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"n",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"o",(function(){return d})),n.d(e,"l",(function(){return f})),n.d(e,"m",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"k",(function(){return m})),n.d(e,"j",(function(){return g})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return b}));var r=n("751a");function i(){return r["a"].get("/banner?type=2")}function s(t){return r["a"].get("/playlist/detail",{params:t})}function c(t){return r["a"].get("/top/playlist",{params:t})}function a(t){return r["a"].get("/personalized",{params:t})}function o(){return r["a"].get("/toplist/detail")}function u(t){return r["a"].post("/song/detail",t)}function l(){return r["a"].post("/recommend/songs")}function d(t){return r["a"].post("/toplist/artist",t)}function f(t){return r["a"].post("/artist/detail",t)}function h(t){return r["a"].post("/artist/top/song",t)}function p(){return r["a"].get("/search/hot/detail")}function m(t){return r["a"].post("/search/suggest",t)}function g(t){return r["a"].post("/cloudsearch",t)}function v(t){return r["a"].post("/song/url",t)}function b(t){return r["a"].post("/lyric",t)}},"30c3":function(t,e,n){"use strict";n("b730")},"380f":function(t,e,n){"use strict";n("d4d0")},"41a6":function(t,e,n){},"42c2":function(t,e,n){},4360:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"manageUser",(function(){return l})),n.d(r,"selectPlay",(function(){return d})),n.d(r,"randomPlay",(function(){return f}));var i={};n.r(i),n.d(i,"logged",(function(){return h})),n.d(i,"userId",(function(){return p})),n.d(i,"userAvatar",(function(){return m})),n.d(i,"cacheViews",(function(){return g})),n.d(i,"playing",(function(){return v})),n.d(i,"fullScreen",(function(){return b})),n.d(i,"playlist",(function(){return y})),n.d(i,"sequenceList",(function(){return _})),n.d(i,"mode",(function(){return S})),n.d(i,"currentIndex",(function(){return T})),n.d(i,"currentSong",(function(){return E})),n.d(i,"showTab",(function(){return C})),n.d(i,"progress",(function(){return k})),n.d(i,"alert",(function(){return w}));var s=n("5880"),c=n.n(s),a=(n("c740"),n("fa7d")),o=n("01ea");function u(t,e){return t.findIndex((function(t){return t.id===e.id}))}var l=function(t,e){var n=t.commit,r=e.status,i=e.id,s=e.avatar;n("SET_LOGIN_STATUS",r),n("SET_USER_ID",i),n("SET_USER_AVATAR",s)},d=function(t,e){var n=t.commit,r=t.state,i=e.list,s=e.index;if(n("SET_SEQUENCE_LIST",i),r.mode===o["a"].random){var c=Object(a["d"])(i);n("SET_PLAYLIST",c),s=u(c,i[s])}else n("SET_PLAYLIST",i);n("SET_CURRENT_INDEX",s),n("SET_FULL_SCREEN",!0),n("SET_PLAYING_STATE",!0)},f=function(t,e){var n=t.commit,r=e.list;n("SET_PLAY_MODE",o["a"].random),n("SET_SEQUENCE_LIST",r);var i=Object(a["d"])(r);n("SET_PLAYLIST",i),n("SET_CURRENT_INDEX",0),n("SET_FULL_SCREEN",!0),n("SET_PLAYING_STATE",!0)},h=function(t){return t.logged},p=function(t){return t.userId},m=function(t){return t.userAvatar},g=function(t){return t.cacheViews},v=function(t){return t.playing},b=function(t){return t.fullScreen},y=function(t){return t.playlist},_=function(t){return t.sequenceList},S=function(t){return t.mode},T=function(t){return t.currentIndex},E=function(t){return t.playlist[t.currentIndex]||{}},C=function(t){return t.showTab},k=function(t){return t.progress},w=function(t){return t.alert},L={logged:!1,userId:0,userAvatar:"",cacheViews:[],playing:!1,fullScreen:!1,playlist:[],sequenceList:[],mode:o["a"].sequence,currentIndex:-1,showTab:!0,progress:0,alert:!1},x=L,O=(n("c975"),n("a434"),{SET_LOGIN_STATUS:function(t,e){t.logged=e},SET_USER_ID:function(t,e){t.userId=e},SET_USER_AVATAR:function(t,e){t.userAvatar=e},SET_CACHE_VIEWS:function(t,e){-1===t.cacheViews.indexOf(e)&&t.cacheViews.push(e)},REMOVE_CACHE_VIEWS:function(t,e){var n=t.cacheViews.indexOf(e);-1!==n&&t.cacheViews.splice(n,1)},SET_PLAYING_STATE:function(t,e){t.playing=e},SET_FULL_SCREEN:function(t,e){t.fullScreen=e},SET_PLAYLIST:function(t,e){t.playlist=e},SET_SEQUENCE_LIST:function(t,e){t.sequenceList=e},SET_PLAY_MODE:function(t,e){t.mode=e},SET_CURRENT_INDEX:function(t,e){t.currentIndex=e},SET_SHOW_TAB:function(t,e){t.showTab=e},SET_PROGRESS:function(t,e){t.progress=e},SET_ALERT:function(t,e){t.alert=e}}),P=O;e["a"]=new c.a.Store({actions:r,getters:i,state:x,mutations:P})},"44fd":function(t,e,n){},"4a6a":function(t,e,n){},"4e1c":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-upDown"}},[t.showFlag?n("div",{staticClass:"alert",class:t.bgc},[n("div",{staticClass:"close icon-cancel",on:{click:t.close}}),n("div",{staticClass:"text"},[t._v(t._s(t.text))]),t.always?n("div",{staticClass:"refresh",on:{click:t.refresh}},[t._v("点击刷新")]):t._e()]):t._e()])},i=[],s={name:"Alert",data:function(){return{showFlag:!1}},props:{text:{type:String,default:"网络错误，请刷新页面重试"},alertType:{type:String,default:"warn"},always:{type:Boolean,default:!1}},created:function(){this.timer=null},computed:{bgc:function(){return"warn"===this.alertType?"warn":"normal"}},methods:{show:function(){var t=this;this.showFlag=!0,this.always||(clearTimeout(this.timer),this.timer=setTimeout((function(){t.showFlag=!1}),3e3))},refresh:function(){window.location.reload()},close:function(){this.showFlag=!1}}},c=s,a=(n("92f3"),n("2877")),o=Object(a["a"])(c,r,i,!1,null,"34484906",null);e["a"]=o.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),i=n.n(r),s=(n("44fd"),n("caf9")),c=(n("d3b7"),n("6389")),a=n.n(c),o=[{path:"/",redirect:"/discover"},{path:"/discover",component:function(){return n.e("chunk-68c400ac").then(n.bind(null,"a4c1"))},meta:{title:"发现",index:0}},{path:"/profile",component:function(){return n.e("chunk-1224c105").then(n.bind(null,"3b42"))},meta:{title:"我的",index:0}},{path:"/search",component:function(){return n.e("chunk-5fb1204b").then(n.bind(null,"1b29"))},meta:{title:"搜索",index:0}},{path:"/login",component:function(){return n.e("chunk-0ded4236").then(n.bind(null,"ede4"))},meta:{title:"登录",index:1}},{path:"/playlists",component:function(){return n.e("chunk-010302fe").then(n.bind(null,"18ba"))},meta:{title:"歌单广场",index:1}},{path:"/ranks",component:function(){return n.e("chunk-28b40024").then(n.bind(null,"82a1"))},meta:{title:"排行榜",index:1}},{path:"/daily",component:function(){return n.e("chunk-3209dd3b").then(n.bind(null,"da6f"))},meta:{title:"今日推荐",index:1}},{path:"/singers",component:function(){return n.e("chunk-303996f6").then(n.bind(null,"62c6"))},meta:{title:"歌手榜",index:1}},{path:"/singer/detail/:id",component:function(){return n.e("chunk-77b46fca").then(n.bind(null,"7235"))},meta:{title:"歌手详情",index:2}},{path:"/playlists/detail/:id",component:function(){return n.e("chunk-9a733b50").then(n.bind(null,"3171"))},meta:{title:"歌单详情",index:2}},{path:"/search/:keywords",component:function(){return n.e("chunk-3626bc70").then(n.bind(null,"8cc6"))},meta:{title:"搜索结果",index:1}}],u=new a.a({base:"",routes:o});u.beforeEach((function(t,e,n){document.title="music river - "+t.matched[0].meta.title,n()}));var l=u,d=n("2b27"),f=n.n(d),h=n("4360"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"container",attrs:{id:"app"}},[n("alert",{ref:"alert",attrs:{always:!0}}),n("transition",{attrs:{name:t.transitionName}},[n("keep-alive",{attrs:{include:["Discover","Profile"].concat(t.cacheViews)}},[n("router-view")],1)],1),n("transition",{attrs:{name:"up-down"}},[n("tab-bar",{directives:[{name:"show",rawName:"v-show",value:t.showTab,expression:"showTab"}]})],1),n("player")],1):t._e()},m=[],g=n("5530"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"tab-bar"}},[n("div",{staticClass:"discover-btn btn",class:t.setActiveClass("/discover"),on:{click:function(e){return t.tabClicked("/discover")}}},[n("div",{staticClass:"icon icon-headphones"}),n("p",{staticClass:"text"},[t._v("发现")])]),n("cd-cover",{staticClass:"cd",nativeOn:{click:function(e){return t.fullScreen(e)}}}),n("div",{staticClass:"discover-btn btn",class:t.setActiveClass("/profile"),on:{click:function(e){return t.tabClicked("/profile")}}},[n("span",{staticClass:"icon icon-user"}),n("p",{staticClass:"text"},[t._v("我的")])])],1)},b=[],y=n("5880"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("progress-circle",{staticClass:"progress-circle",attrs:{radius:t.cdRadius,percent:t.progress},scopedSlots:t._u([{key:"default",fn:function(){return[n("div",{staticClass:"cd-bg"},[t.currentSong.al?n("img",{staticClass:"cover",class:t.cdRotateClass,attrs:{src:t.currentSong.al.picUrl,alt:""}}):t._e()])]},proxy:!0}])})},S=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-circle"},[n("svg",{attrs:{width:t.radius,height:t.radius,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{staticClass:"progress-background",attrs:{r:"50",cx:"50",cy:"50",fill:"transparent"}}),n("circle",{staticClass:"progress-bar",attrs:{r:"50",cx:"50",cy:"50",fill:"transparent","stroke-dasharray":t.dashArray,"stroke-dashoffset":t.dashOffset}})]),t._t("default")],2)},E=[],C=(n("a9e3"),{props:{radius:{type:Number,default:100},percent:{type:Number,default:0}},data:function(){return{dashArray:100*Math.PI}},computed:{dashOffset:function(){return(1-this.percent)*this.dashArray}}}),k=C,w=(n("8189"),n("2877")),L=Object(w["a"])(k,T,E,!1,null,"d16d813a",null),x=L.exports,O={name:"CdCover",components:{ProgressCircle:x},data:function(){return{cdRadius:50}},computed:Object(g["a"])(Object(g["a"])({},Object(y["mapGetters"])(["currentSong","playing","progress"])),{},{cdRotateClass:function(){return this.playing?"play":"play pause"}})},P=O,A=(n("f1af"),Object(w["a"])(P,_,S,!1,null,"26a49188",null)),j=A.exports,I=n("2934"),R={name:"tabBar",components:{CdCover:j},data:function(){return{currentRoute:this.$route.path,flag:!0}},computed:Object(g["a"])(Object(g["a"])({},Object(y["mapGetters"])(["playlist"])),{},{cdRotateClass:function(){return this.playing?"play":"play pause"}}),methods:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(y["mapMutations"])(["SET_FULL_SCREEN"])),Object(y["mapActions"])(["randomPlay"])),{},{fullScreen:function(){this.playlist.length>0?this.SET_FULL_SCREEN(!0):this.flag&&(this.randomMyFav(),this.flag=!1)},tabClicked:function(t){this.currentRoute=t,this.$router.push(t).catch((function(t){return t}))},setActiveClass:function(t){return this.currentRoute===t?"active":""},randomMyFav:function(){var t=this;Object(I["g"])({id:148842191}).then((function(e){t.randomPlay({list:e.playlist.tracks}),t.SET_FULL_SCREEN(!0)}))}}),watch:{$route:function(t){this.currentRoute=t.path}}},N=R,$=(n("30c3"),Object(w["a"])(N,v,b,!1,null,"05b099d5",null)),U=$.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.playlist.length>0,expression:"playlist.length > 0"}],staticClass:"player container"},[n("alert",{ref:"alert",attrs:{text:"暂无版权","alert-type":"normal"}}),n("transition",{attrs:{name:"up-down"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreen,expression:"fullScreen"}],staticClass:"normal-player container"},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreen,expression:"fullScreen"}],staticClass:"background"},[t.currentSong.al?n("img",{staticClass:"bg-img",attrs:{src:t.currentSong.al.picUrl,alt:""}}):t._e(),n("div",{staticClass:"bg-wrapper"})])]),n("div",{staticClass:"top"},[n("div",{staticClass:"back-icon icon-angle-down",on:{click:function(e){return t.setFullScreen(!1)}}}),n("div",{staticClass:"title"},[n("div",{staticClass:"song-name"},[t.currentSong.copyright?n("span",{staticClass:"copyright"},[t._v("VIP")]):t._e(),t._v(t._s(t.currentSong.name)+" ")]),n("div",{staticClass:"singers-name"},t._l(t.currentSong.ar,(function(e,r){return n("span",{key:r},[t._v(t._s(e.name)),t.currentSong.ar.length>r+1?n("span",[t._v("/")]):t._e()])})),0)])]),n("div",{staticClass:"middle",on:{click:t.toggleMiddleView}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFullLyric,expression:"!showFullLyric"}],staticClass:"middle-cd"},[n("div",{staticClass:"cover-wrapper"},[n("div",{staticClass:"cd-bg"},[t.currentSong.al?n("img",{staticClass:"cover",class:t.cdRotateClass,attrs:{src:t.currentSong.al.picUrl,alt:""}}):t._e()])]),n("div",{staticClass:"current-lyric"},[n("p",[t._v(t._s(t.currentLyric))]),n("p",[t._v(t._s(t.currentTLyric))])])]),t.showFullLyric?n("div",{staticClass:"lyric"},[n("my-scroll",{ref:"myScroll",scopedSlots:t._u([{key:"scrollContent",fn:function(){return[t.lyric?n("div",{staticClass:"lyric-wrapper"},t._l(t.lyric.lines,(function(e,r){return n("div",{key:r,ref:"lyricLine",refInFor:!0,staticClass:"lyric-text",class:{current:t.currentLine===r}},[n("p",[t._v(t._s(e.txt))]),n("p",{staticClass:"subTxt"},[t._v(t._s(t.getTLyric(e.time)))])])})),0):n("div",[n("p",[t._v("暂无歌词")])])]},proxy:!0}],null,!1,3371574324)})],1):t._e()]),n("div",{staticClass:"bottom"},[n("div",{staticClass:"control"},[n("div",{staticClass:"control-bar"},[n("span",{staticClass:"duration"},[t._v(t._s(t.formatTime(t.currentTime)))]),n("progress-bar",{attrs:{percent:t.progressPercent},on:{progressChange:t.changeProgress}}),n("span",{staticClass:"duration"},[t._v(t._s(t.formatTime(t.currentSong.dt/1e3)))])],1),n("div",{staticClass:"control-buttons"},[n("div",{staticClass:"mode",class:t.playModeIcon,on:{click:t.changeMode}}),n("div",{staticClass:"prev-btn icon-skip_previous",class:t.disableClass,on:{click:t.prev}}),n("div",{staticClass:"play-btn",class:t.playIcon,on:{click:t.togglePlaying}}),n("div",{staticClass:"next-btn icon-skip_next",class:t.disableClass,on:{click:t.next}}),n("div",{staticClass:"like-btn icon-heart",class:t.likeBtnClass,on:{click:t.likeMusic}})])])])],1)]),n("transition",{attrs:{name:"up-down"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullScreen&&t.playlist.length>0&&!t.showTab,expression:"!fullScreen && playlist.length > 0 && !showTab"}],staticClass:"mini-player",on:{click:function(e){return t.setFullScreen(!0)}}},[n("cd-cover",{staticClass:"cd"}),n("div",{staticClass:"music-msg"},[n("span",{staticClass:"song-name"},[t._v(" "+t._s(t.currentSong.name)+" (")]),t._l(t.currentSong.ar,(function(e,r){return n("span",{key:r},[t._v(t._s(e.name)),t.currentSong.ar.length>r+1?n("span",[t._v("/")]):t._e()])})),t._v(") ")],2),n("div",{staticClass:"mini-control"},[n("div",{staticClass:"prev-btn icon-skip_previous",class:t.disableClass,on:{click:function(e){return e.stopPropagation(),t.prev(e)}}}),n("div",{staticClass:"play-btn",class:t.playIcon,on:{click:function(e){return e.stopPropagation(),t.togglePlaying(e)}}}),n("div",{staticClass:"next-btn icon-skip_next",class:t.disableClass,on:{click:function(e){return e.stopPropagation(),t.next(e)}}})])],1)]),n("audio",{ref:"audio",attrs:{src:t.musicUrl},on:{play:t.ready,error:t.error,timeupdate:t.updateTime,ended:t.end}})],1)},F=[],B=(n("99af"),n("4de4"),n("c740"),n("c975"),n("25f0"),n("c24f")),V=n("01ea"),D=n("fa7d"),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar-wrapper",on:{click:t.barClicked}},[n("div",{ref:"progressBar",staticClass:"progress-bar"},[n("div",{staticClass:"bar-inner"},[n("div",{ref:"progress",staticClass:"progress"}),n("div",{ref:"btn",staticClass:"btn-wrapper",on:{touchstart:function(e){return e.preventDefault(),t.btnTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.btnTouchMove(e)},touchend:function(e){return e.preventDefault(),t.btnTouchEnd(e)}}},[n("div",{staticClass:"btn"})])])])])},G=[],Y=n("26a1"),W=Object(Y["a"])("transform"),X={name:"ProgressBar",props:{percent:Number},watch:{percent:function(t){if(t>=0&&!this.touch.initiated){var e=this.$refs.progressBar.clientWidth,n=Math.floor(t*e);this.changePosition(n)}}},created:function(){this.touch={}},methods:{btnTouchStart:function(t){this.touch.initiated=!0,this.touch.startX=t.touches[0].pageX,this.touch.left=this.$refs.progress.clientWidth,this.$refs.progress.style.backgroundColor="#3fa6a5"},btnTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0].pageX-this.touch.startX,n=Math.min(Math.max(0,this.touch.left+e),this.$refs.progressBar.clientWidth);this.changePosition(n)}},btnTouchEnd:function(){this.touch.initiated=!1,this.triggerProgress(),this.$refs.progress.style.backgroundColor="#fff"},changePosition:function(t){this.$refs.progress.style.width="".concat(t,"px"),this.$refs.btn.style[W]="translate3d(".concat(t,"px , 0 , 0)")},triggerProgress:function(){var t=this.$refs.progress.clientWidth/this.$refs.progressBar.clientWidth;this.$emit("progressChange",t)},barClicked:function(t){var e=this.$refs.progressBar.getBoundingClientRect(),n=t.pageX-e.left;this.changePosition(n),this.triggerProgress()}}},H=X,z=(n("ea1b"),Object(w["a"])(H,q,G,!1,null,"37308db4",null)),Q=z.exports,J=n("dcab"),K=n("3c75"),Z=n.n(K),tt=n("4e1c"),et={name:"Player",data:function(){return{musicUrl:"",canPlay:!1,songLoaded:!1,currentTime:0,lyric:null,tLyric:null,showFullLyric:!1,currentLine:0,currentLyric:"",currentTLyric:"",likeList:[],liked:!1}},components:{ProgressBar:Q,CdCover:j,MyScroll:J["a"],Alert:tt["a"]},created:function(){this.timer=null,this.timer2=null,this.logged&&this.getLikeList()},computed:Object(g["a"])(Object(g["a"])({},Object(y["mapGetters"])(["userId","fullScreen","playlist","sequenceList","currentSong","playing","showTab","currentIndex","mode","logged"])),{},{playIcon:function(){return this.playing?"icon-pause_circle_outline":"icon-play_circle_outline"},playModeIcon:function(){return this.mode===V["a"].sequence?"icon-repeat":this.mode===V["a"].loop?"icon-repeat_one":"icon-shuffle"},cdRotateClass:function(){return this.playing?"play":"play pause"},disableClass:function(){return this.songLoaded?"":"disable"},likeBtnClass:function(){return this.liked?"liked":""},progressPercent:function(){return this.currentTime/(this.currentSong.dt/1e3)}}),methods:Object(g["a"])(Object(g["a"])({},Object(y["mapMutations"])(["SET_FULL_SCREEN","SET_PLAYING_STATE","SET_CURRENT_INDEX","SET_PROGRESS","SET_PLAY_MODE","SET_PLAYLIST"])),{},{getLikeList:function(){var t=this;Object(B["a"])({uid:this.userId}).then((function(e){t.likeList=e.ids}))},likeMusic:function(){var t=this;Object(B["f"])({like:!this.liked,id:this.currentSong.id}).then((function(e){200===e.code&&(t.liked=!t.liked)}))},setFullScreen:function(t){this.SET_FULL_SCREEN(t)},playMusic:function(){var t=this;this.canPlay=!1,Object(I["f"])({id:this.currentSong.id}).then((function(e){e.data[0].url?(t.musicUrl=e.data[0].url,t.canPlay=!0,clearTimeout(t.timer),t.timer=setTimeout((function(){t.$refs.audio.play(),t.getLyric()}),1e3)):(t.songLoaded=!0,t.$refs.alert.show(),clearTimeout(t.timer2),t.timer2=setTimeout((function(){t.next()}),3e3))}))},getLyric:function(){var t=this;Object(I["e"])({id:this.currentSong.id}).then((function(e){e.lrc?(t.lyric=new Z.a(e.lrc.lyric,t.handleLyric),t.playing&&t.songLoaded&&(t.lyric.play(),t.showFullLyric&&t.$refs.myScroll.scrollTo(0))):t.lyric=null,e.tlyric?t.tLyric=new Z.a(e.tlyric.lyric):t.tlyric=null})).catch((function(){t.lyric=null,t.currentTLyric="",t.currentLyric="",t.currentLine=0}))},getTLyric:function(t){var e=this.tLyric.lines.filter((function(e){return e.time===t}));return e.length>0?e[0].txt:""},handleLyric:function(t){var e=t.lineNum,n=t.txt;this.currentLine=e,this.currentLyric=n;var r=this.lyric.lines[e].time;if(this.currentTLyric=this.getTLyric(r),this.showFullLyric&&this.lyric){var i=document.querySelectorAll(".lyric-text")[e];i.scrollIntoView({behavior:"smooth",block:"center"})}},togglePlaying:function(){this.songLoaded&&(this.SET_PLAYING_STATE(!this.playing),this.lyric&&this.lyric.togglePlay())},prev:function(){if(this.songLoaded){if(1===this.playlist.length)this.loop();else{var t=this.currentIndex-1;-1===t&&(t=this.playlist.length-1),this.SET_CURRENT_INDEX(t),this.playing||this.togglePlaying()}this.songLoaded=!1}},next:function(){if(this.songLoaded)if(1!==this.playlist.length){var t=this.currentIndex+1;t===this.playlist.length&&(t=0),this.SET_CURRENT_INDEX(t),this.playing||this.togglePlaying(),this.songLoaded=!1}else this.loop()},ready:function(){this.songLoaded=!0},error:function(){this.songLoaded=!0},end:function(){this.mode===V["a"].loop?this.loop():this.next()},loop:function(){if(this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.lyric&&this.lyric.seek(0),this.showFullLyric&&this.lyric){var t=document.querySelectorAll(".lyric-text")[0];t.scrollIntoView({behavior:"smooth",block:"center"})}},updateTime:function(t){this.currentTime=t.target.currentTime},formatTime:function(t){t|=0;var e=this._pad(t/60|0),n=this._pad(t%60);return"".concat(e,":").concat(n)},_pad:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString().length;while(n<e)t="0"+t,n++;return t},changeProgress:function(t){var e=this.currentSong.dt/1e3*t;this.$refs.audio.currentTime=e,this.playing||this.togglePlaying(),this.lyric&&this.lyric.seek(1e3*e)},changeMode:function(){var t=this,e=(this.mode+1)%3;this.SET_PLAY_MODE(e);var n=null;n=e===V["a"].random?Object(D["d"])(this.sequenceList):this.sequenceList;var r=n.findIndex((function(e){return e.id===t.currentSong.id}));this.SET_PLAYLIST(n),this.SET_CURRENT_INDEX(r)},toggleMiddleView:function(){this.showFullLyric=!this.showFullLyric}}),watch:{currentSong:function(t,e){t.id!==e.id&&(this.lyric&&this.lyric.stop(),this.currentLine=0,this.currentLyric="",this.currentTLyric="",this.playMusic(),this.liked=-1!==this.likeList.indexOf(this.currentSong.id))},playing:function(t){var e=this.$refs.audio;t&&this.canPlay?e.play():e.pause()},progressPercent:function(t){this.SET_PROGRESS(t)},showFullLyric:function(t){var e=this;t&&this.lyric&&this.$nextTick((function(){var t=document.querySelectorAll(".lyric-text")[e.currentLine];t.scrollIntoView({block:"center"})}))}}},nt=et,rt=(n("380f"),Object(w["a"])(nt,M,F,!1,null,"35b92636",null)),it=rt.exports,st={components:{TabBar:U,Player:it,Alert:tt["a"]},data:function(){return{transitionName:"",show:!1}},created:function(){this.checkUser()},updated:function(){var t=this.$route.path;"/discover"===t||"/profile"===t?this.SET_SHOW_TAB(!0):this.SET_SHOW_TAB(!1)},methods:Object(g["a"])(Object(g["a"])(Object(g["a"])({},Object(y["mapActions"])(["manageUser"])),Object(y["mapMutations"])(["SET_SHOW_TAB","SET_ALERT"])),{},{checkUser:function(){var t=this;Object(B["d"])().then((function(e){e.account&&t.manageUser({status:!0,id:e.account.id,avatar:e.profile.avatarUrl}),t.show=!0}))}}),computed:Object(g["a"])({},Object(y["mapGetters"])(["cacheViews","showTab","alert"])),watch:{$route:function(t,e){t.meta.index>e.meta.index?this.transitionName="slide-left":t.meta.index<e.meta.index?this.transitionName="slide-right":this.transitionName=""},alert:function(t){t&&this.$refs.alert&&this.$refs.alert.show(),this.SET_ALERT(!1)}}},ct=st,at=(n("5d4e"),Object(w["a"])(ct,p,m,!1,null,"dc2c1a6c",null)),ot=at.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader-container"},[t._m(0),n("P",{staticClass:"text"},[t._v("LOADING")])],1)},lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader"},[n("div",{staticClass:"loader__bar"}),n("div",{staticClass:"loader__bar"}),n("div",{staticClass:"loader__bar"}),n("div",{staticClass:"loader__bar"}),n("div",{staticClass:"loader__bar"}),n("div",{staticClass:"loader__ball"})])}],dt={name:"Loader"},ft=dt,ht=(n("028e"),Object(w["a"])(ft,ut,lt,!1,null,"b0958754",null)),pt=ht.exports,mt={created:function(){this.compute()},methods:{compute:function(){var t=375,e=document.documentElement.clientWidth;e<320?e=320:e>768&&(e=768),this.scale=e/t}},computed:{setUrl:function(){return function(t,e,n){return"".concat(t,"?param=").concat(Math.floor(e*this.scale*3),"y").concat(Math.floor(n*this.scale*3))}}}},gt=n("d9b7"),vt=n.n(gt);i.a.mixin(mt),i.a.use(s["a"]),i.a.use(f.a),i.a.use(vt.a),i.a.$cookies.config("7d"),i.a.component("Loader",pt),i.a.directive("focus",{inserted:function(t){t.focus()}}),i.a.prototype.bus=new i.a,i.a.config.productionTip=!1,new i.a({router:l,store:h["a"],render:function(t){return t(ot)}}).$mount("#app")},5880:function(t,e){t.exports=Vuex},"5b83":function(t,e,n){},"5d4e":function(t,e,n){"use strict";n("41a6")},6389:function(t,e){t.exports=VueRouter},"751a":function(t,e,n){"use strict";n("d3b7");var r=n("5530"),i=n("bc3a"),s=n.n(i),c=n("2b27"),a=n.n(c),o=n("4360"),u=function(){return(new Date).getTime()},l=s.a.create({baseURL:"https://autumnfish.cn/",timeout:1e4,withCredentials:!0});l.interceptors.request.use((function(t){var e=a.a.get("userCookie")||"";return e&&(t.params=Object(r["a"])(Object(r["a"])({},t.params),{},{cookie:e})),"get"===t.method?t.params=Object(r["a"])(Object(r["a"])({},t.params),{},{timestamp:u()}):"post"===t.method&&(t.url+="?timestamp=".concat(u()),t.data=Object(r["a"])({},t.data)),t}),(function(t){return o["a"].commit("SET_ALERT",!0),Promise.reject(t)})),l.interceptors.response.use((function(t){return 200!==t.status?Promise.reject(t):t.data}),(function(t){if(t.response){var e=t.response.data;return Promise.reject(e)}return o["a"].commit("SET_ALERT",!0),Promise.reject(t)})),e["a"]=l},8189:function(t,e,n){"use strict";n("92f4")},"8bbf":function(t,e){t.exports=Vue},"92f3":function(t,e,n){"use strict";n("a48d")},"92f4":function(t,e,n){},a48d:function(t,e,n){},b730:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return f}));var r=n("751a");function i(t){return r["a"].post("/login/cellphone",t)}function s(t){return r["a"].post("/login",t)}function c(){return r["a"].get("/user/account")}function a(t){return r["a"].get("/user/detail",{params:t})}function o(t){return r["a"].get("/user/record",{params:t})}function u(t){return r["a"].get("/user/playlist",{params:t})}function l(t){return r["a"].get("/likelist",{params:t})}function d(t){return r["a"].get("/like",{params:t})}function f(){return r["a"].get("/logout")}},c92e:function(t,e,n){},d4d0:function(t,e,n){},d9b7:function(t,e){t.exports=VueAwesomeSwiper},dcab:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"myScroll",staticClass:"scroll-wrapper",on:{scroll:t.handleScroll}},[t._t("scrollContent")],2)},i=[],s={name:"MyScroll",data:function(){return{scrollTop:0}},props:{listenScroll:{type:Boolean,default:!1},pullUp:{type:Boolean,default:!1},rememberScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop;if(this.listenScroll&&this.$emit("scroll",e),this.pullUp){var n=t.target.offsetHeight,r=t.target.querySelector(".scroll-content").offsetHeight,i=r-n;e>=i-10&&this.$emit("pullUp")}},scrollTo:function(t){this.$refs.myScroll.scrollTop=t}},activated:function(){var t=this;this.rememberScroll&&this.$nextTick().then((function(){t.$refs.myScroll.scrollTop=t.scrollTop}))},deactivated:function(){this.rememberScroll&&(this.scrollTop=this.$refs.myScroll.scrollTop)}},c=s,a=(n("f488"),n("2877")),o=Object(a["a"])(c,r,i,!1,null,"fb56b95a",null);e["a"]=o.exports},ea1b:function(t,e,n){"use strict";n("5b83")},f1af:function(t,e,n){"use strict";n("4a6a")},f488:function(t,e,n){"use strict";n("42c2")},fa7d:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c}));n("fb6a");function r(t){return t>=1e8?t=Math.round(t/1e7)/10+"亿":t>=1e4&&(t=Math.round(t/1e4)+"万"),t}function i(t){return t+=1,t<10&&(t="0"+t),t}function s(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function c(t){for(var e=t.slice(),n=0;n<e.length;n++){var r=s(0,n),i=t[n];e[n]=e[r],e[r]=i}return e}}});